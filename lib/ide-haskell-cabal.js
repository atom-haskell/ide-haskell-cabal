"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
const ide_backend_1 = require("./ide-backend");
var config_1 = require("./config");
exports.config = config_1.config;
let disposables;
function activate() { }
exports.activate = activate;
function deactivate() {
    if (disposables) {
        disposables.dispose();
    }
    disposables = undefined;
}
exports.deactivate = deactivate;
function consumeUPI(reg) {
    const backend = new ide_backend_1.IdeBackend(reg);
    disposables = new atom_1.CompositeDisposable();
    disposables.add(new atom_1.Disposable(() => backend.destroy()));
    return disposables;
}
exports.consumeUPI = consumeUPI;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWRlLWhhc2tlbGwtY2FiYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaWRlLWhhc2tlbGwtY2FiYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBc0Q7QUFDdEQsK0NBQTBDO0FBRzFDLG1DQUFpQztBQUF4QiwwQkFBQSxNQUFNLENBQUE7QUFFZixJQUFJLFdBQTRDLENBQUE7QUFFaEQsc0JBQXdDLENBQUM7QUFBekMsNEJBQXlDO0FBRXpDO0lBQ0UsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUFDLENBQUM7SUFDMUMsV0FBVyxHQUFHLFNBQVMsQ0FBQTtBQUN6QixDQUFDO0FBSEQsZ0NBR0M7QUFFRCxvQkFBMkIsR0FBeUI7SUFDbEQsTUFBTSxPQUFPLEdBQUcsSUFBSSx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBRW5DLFdBQVcsR0FBRyxJQUFJLDBCQUFtQixFQUFFLENBQUE7SUFDdkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLGlCQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUV4RCxNQUFNLENBQUMsV0FBVyxDQUFBO0FBQ3BCLENBQUM7QUFQRCxnQ0FPQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpc3Bvc2FibGUsIENvbXBvc2l0ZURpc3Bvc2FibGUgfSBmcm9tICdhdG9tJ1xuaW1wb3J0IHsgSWRlQmFja2VuZCB9IGZyb20gJy4vaWRlLWJhY2tlbmQnXG5pbXBvcnQgKiBhcyBVUEkgZnJvbSAnYXRvbS1oYXNrZWxsLXVwaSdcblxuZXhwb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnXG5cbmxldCBkaXNwb3NhYmxlczogQ29tcG9zaXRlRGlzcG9zYWJsZSB8IHVuZGVmaW5lZFxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZhdGUoKSB7IC8qIG5vb3AgKi8gfVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgaWYgKGRpc3Bvc2FibGVzKSB7IGRpc3Bvc2FibGVzLmRpc3Bvc2UoKSB9XG4gIGRpc3Bvc2FibGVzID0gdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25zdW1lVVBJKHJlZzogVVBJLklVUElSZWdpc3RyYXRpb24pIHtcbiAgY29uc3QgYmFja2VuZCA9IG5ldyBJZGVCYWNrZW5kKHJlZylcblxuICBkaXNwb3NhYmxlcyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKClcbiAgZGlzcG9zYWJsZXMuYWRkKG5ldyBEaXNwb3NhYmxlKCgpID0+IGJhY2tlbmQuZGVzdHJveSgpKSlcblxuICByZXR1cm4gZGlzcG9zYWJsZXNcbn1cbiJdfQ==