"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
const ide_backend_1 = require("./ide-backend");
var config_1 = require("./config");
exports.config = config_1.config;
let disposables;
function activate() {
}
exports.activate = activate;
function deactivate() {
    if (disposables) {
        disposables.dispose();
    }
    disposables = undefined;
}
exports.deactivate = deactivate;
function consumeUPI(reg) {
    const backend = new ide_backend_1.IdeBackend(reg);
    disposables = new atom_1.CompositeDisposable();
    disposables.add(new atom_1.Disposable(() => backend.destroy()));
    return disposables;
}
exports.consumeUPI = consumeUPI;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWRlLWhhc2tlbGwtY2FiYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaWRlLWhhc2tlbGwtY2FiYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBc0Q7QUFDdEQsK0NBQTBDO0FBRzFDLG1DQUFpQztBQUF4QiwwQkFBQSxNQUFNLENBQUE7QUFFZixJQUFJLFdBQTRDLENBQUE7QUFFaEQ7QUFFQSxDQUFDO0FBRkQsNEJBRUM7QUFFRDtJQUNFLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDaEIsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFBO0lBQ3ZCLENBQUM7SUFDRCxXQUFXLEdBQUcsU0FBUyxDQUFBO0FBQ3pCLENBQUM7QUFMRCxnQ0FLQztBQUVELG9CQUEyQixHQUF5QjtJQUNsRCxNQUFNLE9BQU8sR0FBRyxJQUFJLHdCQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7SUFFbkMsV0FBVyxHQUFHLElBQUksMEJBQW1CLEVBQUUsQ0FBQTtJQUN2QyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksaUJBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBRXhELE1BQU0sQ0FBQyxXQUFXLENBQUE7QUFDcEIsQ0FBQztBQVBELGdDQU9DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlzcG9zYWJsZSwgQ29tcG9zaXRlRGlzcG9zYWJsZSB9IGZyb20gJ2F0b20nXG5pbXBvcnQgeyBJZGVCYWNrZW5kIH0gZnJvbSAnLi9pZGUtYmFja2VuZCdcbmltcG9ydCAqIGFzIFVQSSBmcm9tICdhdG9tLWhhc2tlbGwtdXBpJ1xuXG5leHBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZydcblxubGV0IGRpc3Bvc2FibGVzOiBDb21wb3NpdGVEaXNwb3NhYmxlIHwgdW5kZWZpbmVkXG5cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgLyogbm9vcCAqL1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgaWYgKGRpc3Bvc2FibGVzKSB7XG4gICAgZGlzcG9zYWJsZXMuZGlzcG9zZSgpXG4gIH1cbiAgZGlzcG9zYWJsZXMgPSB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnN1bWVVUEkocmVnOiBVUEkuSVVQSVJlZ2lzdHJhdGlvbikge1xuICBjb25zdCBiYWNrZW5kID0gbmV3IElkZUJhY2tlbmQocmVnKVxuXG4gIGRpc3Bvc2FibGVzID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKVxuICBkaXNwb3NhYmxlcy5hZGQobmV3IERpc3Bvc2FibGUoKCkgPT4gYmFja2VuZC5kZXN0cm95KCkpKVxuXG4gIHJldHVybiBkaXNwb3NhYmxlc1xufVxuIl19