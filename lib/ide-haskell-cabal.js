"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
const ide_backend_1 = require("./ide-backend");
var config_1 = require("./config");
exports.config = config_1.config;
let disposables;
function activate() { }
exports.activate = activate;
function deactivate() {
    if (disposables) {
        disposables.dispose();
    }
    disposables = undefined;
}
exports.deactivate = deactivate;
function consumeUPI(reg) {
    const backend = new ide_backend_1.IdeBackend(reg);
    disposables = new atom_1.CompositeDisposable();
    disposables.add(new atom_1.Disposable(() => backend.destroy()));
    return disposables;
}
exports.consumeUPI = consumeUPI;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWRlLWhhc2tlbGwtY2FiYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaWRlLWhhc2tlbGwtY2FiYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBb0Q7QUFDcEQsK0NBQXdDO0FBRXhDLG1DQUErQjtBQUF2QiwwQkFBQSxNQUFNLENBQUE7QUFFZCxJQUFJLFdBQTRDLENBQUE7QUFFaEQsc0JBQXlDLENBQUM7QUFBMUMsNEJBQTBDO0FBRTFDO0lBQ0UsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUFDLENBQUM7SUFDMUMsV0FBVyxHQUFHLFNBQVMsQ0FBQTtBQUN6QixDQUFDO0FBSEQsZ0NBR0M7QUFFRCxvQkFBNEIsR0FBeUI7SUFDbkQsTUFBTSxPQUFPLEdBQUcsSUFBSSx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBRW5DLFdBQVcsR0FBRyxJQUFJLDBCQUFtQixFQUFFLENBQUE7SUFDdkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLGlCQUFVLENBQUMsTUFBTSxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBRXhELE1BQU0sQ0FBQyxXQUFXLENBQUE7QUFDcEIsQ0FBQztBQVBELGdDQU9DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEaXNwb3NhYmxlLCBDb21wb3NpdGVEaXNwb3NhYmxlfSBmcm9tICdhdG9tJ1xuaW1wb3J0IHtJZGVCYWNrZW5kfSBmcm9tICcuL2lkZS1iYWNrZW5kJ1xuXG5leHBvcnQge2NvbmZpZ30gZnJvbSAnLi9jb25maWcnXG5cbmxldCBkaXNwb3NhYmxlczogQ29tcG9zaXRlRGlzcG9zYWJsZSB8IHVuZGVmaW5lZFxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZhdGUgKCkgeyAvKiBub29wICovIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGUgKCkge1xuICBpZiAoZGlzcG9zYWJsZXMpIHsgZGlzcG9zYWJsZXMuZGlzcG9zZSgpIH1cbiAgZGlzcG9zYWJsZXMgPSB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnN1bWVVUEkgKHJlZzogVVBJLklVUElSZWdpc3RyYXRpb24pIHtcbiAgY29uc3QgYmFja2VuZCA9IG5ldyBJZGVCYWNrZW5kKHJlZylcblxuICBkaXNwb3NhYmxlcyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKClcbiAgZGlzcG9zYWJsZXMuYWRkKG5ldyBEaXNwb3NhYmxlKCgpID0+IGJhY2tlbmQuZGVzdHJveSgpKSlcblxuICByZXR1cm4gZGlzcG9zYWJsZXNcbn1cbiJdfQ==