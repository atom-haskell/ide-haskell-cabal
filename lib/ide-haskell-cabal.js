"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
const ide_backend_1 = require("./ide-backend");
var config_1 = require("./config");
exports.config = config_1.config;
let disposables;
function activate() { }
exports.activate = activate;
function deactivate() {
    if (disposables) {
        disposables.dispose();
    }
    disposables = undefined;
}
exports.deactivate = deactivate;
function consumeUPI(reg) {
    const backend = new ide_backend_1.IdeBackend(reg);
    disposables = new atom_1.CompositeDisposable();
    disposables.add(new atom_1.Disposable(() => backend.destroy()));
    return disposables;
}
exports.consumeUPI = consumeUPI;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWRlLWhhc2tlbGwtY2FiYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaWRlLWhhc2tlbGwtY2FiYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBc0Q7QUFDdEQsK0NBQTBDO0FBRTFDLG1DQUFpQztBQUF4QiwwQkFBQSxNQUFNLENBQUE7QUFFZixJQUFJLFdBQTRDLENBQUE7QUFFaEQsc0JBQXdDLENBQUM7QUFBekMsNEJBQXlDO0FBRXpDO0lBQ0UsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUFDLENBQUM7SUFDMUMsV0FBVyxHQUFHLFNBQVMsQ0FBQTtBQUN6QixDQUFDO0FBSEQsZ0NBR0M7QUFFRCxvQkFBMkIsR0FBeUI7SUFDbEQsTUFBTSxPQUFPLEdBQUcsSUFBSSx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBRW5DLFdBQVcsR0FBRyxJQUFJLDBCQUFtQixFQUFFLENBQUE7SUFDdkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLGlCQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUV4RCxNQUFNLENBQUMsV0FBVyxDQUFBO0FBQ3BCLENBQUM7QUFQRCxnQ0FPQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpc3Bvc2FibGUsIENvbXBvc2l0ZURpc3Bvc2FibGUgfSBmcm9tICdhdG9tJ1xuaW1wb3J0IHsgSWRlQmFja2VuZCB9IGZyb20gJy4vaWRlLWJhY2tlbmQnXG5cbmV4cG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJ1xuXG5sZXQgZGlzcG9zYWJsZXM6IENvbXBvc2l0ZURpc3Bvc2FibGUgfCB1bmRlZmluZWRcblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlKCkgeyAvKiBub29wICovIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGUoKSB7XG4gIGlmIChkaXNwb3NhYmxlcykgeyBkaXNwb3NhYmxlcy5kaXNwb3NlKCkgfVxuICBkaXNwb3NhYmxlcyA9IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uc3VtZVVQSShyZWc6IFVQSS5JVVBJUmVnaXN0cmF0aW9uKSB7XG4gIGNvbnN0IGJhY2tlbmQgPSBuZXcgSWRlQmFja2VuZChyZWcpXG5cbiAgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXG4gIGRpc3Bvc2FibGVzLmFkZChuZXcgRGlzcG9zYWJsZSgoKSA9PiBiYWNrZW5kLmRlc3Ryb3koKSkpXG5cbiAgcmV0dXJuIGRpc3Bvc2FibGVzXG59XG4iXX0=